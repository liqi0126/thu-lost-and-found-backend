webpackJsonp([9],{"/i3D":function(e,t){},"0zr5":function(e,t){},flNh:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=r("mtWM"),s=r.n(a),l=r("75LY"),o=r("Y9SB"),i=r("zAap"),n=r("exit"),c=r("QXW3"),u={components:{"lost-table":l.a,"found-table":o.a,"change-button":i.a,"del-button":n.a,"chat-dialog":c.a},props:{id:Number},data:function(){return{isAdmin:!0,isOwner:!0,dialogVisible:!1,status_options:[{value:"GUI",label:"有罪"},{value:"INN",label:"无罪"},{value:"UNT",label:"未处理"}],notEdit:!0,report:{},type_options:[{value:"SCM",label:"诈骗行为"},{value:"HRS",label:"恶意骚扰"},{value:"ADV",label:"推销广告"},{value:"PRN",label:"低俗色情"},{value:"ILL",label:"违法信息"},{value:"SPM",label:"垃圾内容"},{value:"CPY",label:"侵权行为"},{value:"OTH",label:"其他"}],applicant:"",block_content:"",block_dialogFormVisible:!1,user_data:""}},created:function(){var e=this;s.a.get("/reports/"+this.id+"/",{headers:{Authorization:"Bearer "+this.$store.getters.getUserAccessToken}}).then(function(t){e.report=t.data}).catch(function(e){alert("error:"+e)})},methods:{enterFoundNotice:function(e){this.$router.push({name:"found",params:{foundId:e}})},enterLostNotice:function(e){this.$router.push({name:"lost",params:{lostId:e}})},AcceptReport:function(){this.block_dialogFormVisible=!0},AcceptReportAndBlock:function(){var e=this;this.report.verdict_type="GUI",s.a.put("/reports/"+this.id+"/",this.report,{headers:{Authorization:"Bearer "+this.$store.getters.getUserAccessToken}}).then(function(t){e.block_dialogFormVisible=!1,e.blockUser()}).catch(function(e){alert("error:"+e)})},blockUser:function(){var e=this;s.a.get("/users/"+this.report.user.id+"/",{headers:{Authorization:"Bearer "+this.$store.getters.getUserAccessToken}}).then(function(t){e.user_data=t.data,console.log(e.user_data),e.blockUserWithComment()}).catch(function(e){alert("error:"+e)})},blockUserWithComment:function(){var e=this;this.user_data.status="SUS",this.user_data.suspended_reason=this.block_content,s.a.put("/users/"+this.report.user.id+"/",this.user_data,{headers:{Authorization:"Bearer "+this.$store.getters.getUserAccessToken}}).then(function(e){location.reload()}).catch(function(t){e.$alert(t.response.data)})},RejectReport:function(){this.report.verdict_type="INN",s.a.put("/reports/"+this.id+"/",this.report,{headers:{Authorization:"Bearer "+this.$store.getters.getUserAccessToken}}).then(function(e){location.reload()}).catch(function(e){alert("error:"+e)})},DeleteReport:function(){var e=this;s.a.delete("/reports/"+this.id+"/",{headers:{Authorization:"Bearer "+this.$store.getters.getUserAccessToken}}).then(function(t){e.$router.push("/report-list")}).catch(function(e){alert("error:"+e)})},extractTime:function(e){var t=e.split("T"),r=t[0].split("-"),a=t[1].split("+")[0].split(":"),s=new Date,l=new Date,o=new Date;l.setDate(s.getDate()-1),o.setDate(s.getDate()-2);var i=void 0;if(Number(s.getFullYear())===Number(r[0])&&Number(s.getMonth()+1)===Number(r[1])&&Number(s.getDate())===Number(r[2]))if(Number(s.getHours())===Number(a[0])||Number(s.getHours())===Number(a[0])+1&&s.getMinutes()<Number(a[0])){var n=Number(s.getMinutes())<Number(a[1])?60+Number(s.getMinutes())-Number(a[1]):Number(s.getMinutes())-Number(a[1]);i=0===n?"不到1分钟前":String(n)+"分钟前"}else i=a[0]+":"+a[1];else i=Number(l.getFullYear())===Number(r[0])&&Number(l.getMonth()+1)===Number(r[1])&&Number(l.getDate())===Number(r[2])?"昨天 "+a[0]+":"+a[1]:Number(o.getFullYear())===Number(r[0])&&Number(o.getMonth()+1)===Number(r[1])&&Number(o.getDate())===Number(r[2])?"前天 "+a[0]+":"+a[1]:Number(s.getFullYear())!==Number(r[0])?t[0]+" "+a[0]+":"+a[1]:r[1]+"-"+r[2]+" "+a[0]+":"+a[1];return i},change:function(){this.notEdit=!1},confirm:function(){this.notEdit=!0},enterEquipment:function(e){this.$router.push({name:"user",params:{userId:e.id}})},openDialog:function(){this.dialogVisible=!1,this.dialogVisible=!0}}},d={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-card",{staticClass:"title_card",staticStyle:{"font-size":"24px"}},[e._v("\n    "+e._s("举报信息#"+this.id)+"\n    "),r("div",{staticClass:"edit"},[e.isAdmin?r("el-button",{staticClass:"change",attrs:{id:e.id,target:"user",type:"primary"},on:{click:e.AcceptReport}},[e._v("通过")]):e._e(),e._v(" "),e.isAdmin?r("el-button",{staticClass:"change",attrs:{id:e.id,target:"user",type:"primary"},on:{click:e.RejectReport}},[e._v("否决")]):e._e(),e._v(" "),e.isAdmin?r("el-button",{staticClass:"change",attrs:{id:e.id,target:"user",type:"danger"},on:{click:e.DeleteReport}},[e._v("删除")]):e._e()],1)]),e._v(" "),r("el-dialog",{staticClass:"new_type",attrs:{title:"用户封禁原因",visible:e.block_dialogFormVisible},on:{"update:visible":function(t){e.block_dialogFormVisible=t}}},[r("el-form",{attrs:{"label-width":"100px"}},[r("el-form-item",{attrs:{label:"封禁原因"}},[r("el-input",{attrs:{autocomplete:"off",type:"textarea"},model:{value:e.block_content,callback:function(t){e.block_content=t},expression:"block_content"}})],1)],1),e._v(" "),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("div",{staticClass:"foot"},[r("el-button",{on:{click:function(t){e.block_dialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),r("el-button",{attrs:{type:"primary"},on:{click:e.AcceptReportAndBlock}},[e._v("确 定")])],1)])],1),e._v(" "),r("el-card",{staticClass:"card"},[r("el-form",{staticClass:"form",attrs:{"label-width":"100px"}},[r("el-divider",[e._v("基本信息")]),e._v(" "),r("el-form-item",{attrs:{label:"ID"}},[r("el-row",[r("el-col",{attrs:{span:"4"}},[r("el-input",{staticStyle:{width:"100%"},attrs:{disabled:"false"},model:{value:e.report.id,callback:function(t){e.$set(e.report,"id",t)},expression:"report.id"}})],1),e._v(" "),r("el-col",{attrs:{span:"7"}},[r("el-form-item",{staticClass:"label",attrs:{label:"创建时间"}},[r("el-date-picker",{attrs:{type:"datetime",placeholder:"创建时间",format:"yyyy-MM-dd HH:mm:ss",disabled:"false"},model:{value:e.report.created_at,callback:function(t){e.$set(e.report,"created_at",t)},expression:"report.created_at"}})],1)],1),e._v(" "),r("el-col",{attrs:{span:"7"}},[r("el-form-item",{staticClass:"label",attrs:{label:"最近更新"}},[r("el-date-picker",{attrs:{type:"datetime",placeholder:"更新时间",format:"yyyy-MM-dd HH:mm:ss",disabled:"false"},model:{value:e.report.updated_at,callback:function(t){e.$set(e.report,"updated_at",t)},expression:"report.updated_at"}})],1)],1),e._v(" "),r("el-col",{attrs:{span:"6"}},[r("el-form-item",{attrs:{label:"举报人"}},[r("el-input",{attrs:{disabled:"false"},model:{value:e.report.submit_user.username,callback:function(t){e.$set(e.report.submit_user,"username",t)},expression:"report.submit_user.username"}})],1)],1)],1)],1),e._v(" "),r("el-divider",[e._v("举报内容")]),e._v(" "),r("el-form-item",{staticClass:"label",attrs:{label:"被举报人"}},[r("el-row",[r("el-col",{attrs:{span:"4"}},[r("el-input",{attrs:{disabled:"false"},model:{value:e.report.user.username,callback:function(t){e.$set(e.report.user,"username",t)},expression:"report.user.username"}})],1),e._v(" "),r("el-col",{attrs:{span:"6"}},[r("el-form-item",{staticClass:"label",attrs:{label:"被举报寻物启事","label-width":"140px"}},[r("el-link",{attrs:{target:"_blank",underline:!1,disabled:!e.report.lost_notice},on:{click:function(t){return e.enterLostNotice(e.report.lost_notice)}}},[e._v(e._s("寻物启事#"+e.report.lost_notice)),r("i",{staticClass:"el-icon-view el-icon--right"})])],1)],1),e._v(" "),r("el-col",{attrs:{span:"6"}},[r("el-form-item",{staticClass:"label",attrs:{label:"被举报失物招领","label-width":"140px"}},[r("el-link",{attrs:{target:"_blank",underline:!1,disabled:!e.report.found_notice},on:{click:function(t){return e.enterFoundNotice(e.report.found_notice)}}},[e._v(e._s("寻物启事#"+e.report.found_notice)),r("i",{staticClass:"el-icon-view el-icon--right"})])],1)],1)],1)],1),e._v(" "),r("el-form-item",{staticClass:"label",attrs:{label:"举报内容"}},[r("el-input",{attrs:{type:"textarea",disabled:"false"},model:{value:e.report.description,callback:function(t){e.$set(e.report,"description",t)},expression:"report.description"}})],1),e._v(" "),r("el-form-item",{staticClass:"label",attrs:{label:"举报内容"}},[r("el-select",{attrs:{disabled:"false"},model:{value:e.report.type,callback:function(t){e.$set(e.report,"type",t)},expression:"report.type"}},e._l(e.type_options,function(e){return r("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),r("el-form-item",{staticClass:"label",attrs:{label:"状态"}},[r("el-select",{attrs:{disabled:"false"},model:{value:e.report.verdict_type,callback:function(t){e.$set(e.report,"verdict_type",t)},expression:"report.verdict_type"}},e._l(e.status_options,function(e){return r("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1)],1)],1)],1)},staticRenderFns:[]};var p={components:{"report-info":r("VU/8")(u,d,!1,function(e){r("0zr5")},"data-v-29c19a38",null).exports},data:function(){return{id:parseInt(this.$route.params.reportId)}},created:function(){"true"!=this.$store.getters.getUserLoginStatus&&this.$router.push("/login")}},b={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("report-info",{staticClass:"info",attrs:{id:this.id,height:700}})],1)},staticRenderFns:[]};var m=r("VU/8")(p,b,!1,function(e){r("/i3D")},"data-v-5740ae28",null);t.default=m.exports}});
//# sourceMappingURL=9.a40e8a74d691ab97cddf.js.map