webpackJsonp([7],{G096:function(e,t){},JWo3:function(e,t){},WpZz:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=r("mtWM"),s=r.n(a),o={components:{"search-filter":r("KI//").a},props:{id:Number,pageSize:Number,height:Number},data:function(){return{reports:[],options:[{value:"search",label:"全部搜索"},{value:"submit_user__username",label:"筛选：举报者"},{value:"user__username",label:"筛选：被举报者"},{value:"type",label:"筛选：举报类型"},{value:"verdict_type",label:"筛选：状态"}],select:"search",input:"",data:{count:0},Status:{GUI:"有罪",INN:"无罪",UNT:"未处理"},Types:{SCM:"诈骗行为",HRS:"恶意骚扰",ADV:"推销广告",PRN:"低俗色情",ILL:"违法信息",SPM:"垃圾内容",CPY:"侵权行为",OTH:"其他"},reports_notice:[],reports_sum:0,pageSize:10}},created:function(){var e=this;s.a.get("/reports/",{headers:{Authorization:"Bearer "+this.$store.getters.getUserAccessToken}}).then(function(t){e.reports=t.data.results;for(var r=0;r<e.reports.length;r++)e.reports[r].created_at=e.extractTime(e.reports[r].created_at),e.reports[r].verdict_type=e.Status[e.reports[r].verdict_type],e.reports[r].type=e.Types[e.reports[r].type];e.reports_sum=t.data.count}).catch(function(e){alert("error:"+e)}),this.changePage(1)},methods:{filterStatus:function(e,t){return t.verdict_type===e},filterType:function(e,t){return t.type===e},sortChange:function(e,t,r){var a=this,o=void 0;o="descending"==e.order?"-"+e.prop:e.prop,s.a.get("/reports",{params:{ordering:o,offset:0,limit:this.pageSize}}).then(function(e){a.reports=e.data.results;for(var t=0;t<a.reports.length;t++)a.reports[t].created_at=a.extractTime(a.reports[t].created_at),a.reports[t].verdict_type=a.Status[a.reports[t].verdict_type],a.reports[t].type=a.Types[a.reports[t].type]}).catch(function(e){console.log(e),a.$alert(e.response.data)})},enter:function(e){this.$router.push({name:"report",params:{reportId:e.id}})},searchAndFilter:function(e,t){this.select=e,this.input=t,this.changePage(1)},changePage:function(e){var t=this;s.a.get("/reports",{params:{page:e},headers:{Authorization:"Bearer "+this.$store.getters.getUserAccessToken}}).then(function(e){t.reports=e.data.results;for(var r=0;r<t.reports.length;r++)t.reports[r].created_at=t.extractTime(t.reports[r].created_at),t.reports[r].verdict_type=t.Status[t.reports[r].verdict_type],t.reports[r].type=t.Types[t.reports[r].type]}).catch(function(e){console.log(e)})},extractTime:function(e){var t=e.split("T"),r=t[0].split("-"),a=t[1].split("+")[0].split(":"),s=new Date,o=new Date,n=new Date;o.setDate(s.getDate()-1),n.setDate(s.getDate()-2);var u=void 0;if(Number(s.getFullYear())===Number(r[0])&&Number(s.getMonth()+1)===Number(r[1])&&Number(s.getDate())===Number(r[2]))if(Number(s.getHours())===Number(a[0])||Number(s.getHours())===Number(a[0])+1&&s.getMinutes()<Number(a[0])){var l=Number(s.getMinutes())<Number(a[1])?60+Number(s.getMinutes())-Number(a[1]):Number(s.getMinutes())-Number(a[1]);u=0===l?"不到1分钟前":String(l)+"分钟前"}else u=a[0]+":"+a[1];else u=Number(o.getFullYear())===Number(r[0])&&Number(o.getMonth()+1)===Number(r[1])&&Number(o.getDate())===Number(r[2])?"昨天 "+a[0]+":"+a[1]:Number(n.getFullYear())===Number(r[0])&&Number(n.getMonth()+1)===Number(r[1])&&Number(n.getDate())===Number(r[2])?"前天 "+a[0]+":"+a[1]:Number(s.getFullYear())!==Number(r[0])?t[0]+" "+a[0]+":"+a[1]:r[1]+"-"+r[2]+" "+a[0]+":"+a[1];return u}}},n={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-card",{staticClass:"title-card"},[e._v("所有举报信息")]),e._v(" "),r("search-filter",{attrs:{options:e.options},on:{search:e.searchAndFilter}}),e._v(" "),r("el-card",{staticClass:"table-card"},[r("el-table",{staticClass:"table",attrs:{data:e.reports,stripe:"",id:"users-table"},on:{"row-click":e.enter,"sort-change":e.sortChange}},[r("el-table-column",{attrs:{prop:"id",label:"ID",width:"100",sortable:"custom"}}),e._v(" "),r("el-table-column",{attrs:{prop:"created_at",label:"创建时间",width:"200",sortable:"custom"}}),e._v(" "),r("el-table-column",{attrs:{prop:"submit_user.username",label:"举报者",width:"200"}}),e._v(" "),r("el-table-column",{attrs:{prop:"user.username",label:"被举报者",width:"500"}}),e._v(" "),r("el-table-column",{attrs:{prop:"type",label:"举报类型",width:"150",filters:[{text:"诈骗行为",value:"诈骗行为"},{text:"恶意骚扰",value:"恶意骚扰"},{text:"推销广告",value:"推销广告"},{text:"低俗色情",value:"低俗色情"},{text:"违法内容",value:"违法内容"},{text:"垃圾内容",value:"垃圾内容"},{text:"侵权行为",value:"侵权行为"},{text:"其他",value:"其他"}],"filter-method":e.filterType,"filter-placement":"bottom-end"}}),e._v(" "),r("el-table-column",{attrs:{prop:"verdict_type",label:"状态",width:"150",filters:[{text:"有罪",value:"有罪"},{text:"无罪",value:"无罪"},{text:"未处理",value:"未处理"}],"filter-method":e.filterStatus,"filter-placement":"bottom-end"}})],1),e._v(" "),r("el-pagination",{staticClass:"page-chooser",attrs:{background:"",layout:"prev, pager, next",total:e.reports_sum},on:{"current-change":e.changePage}})],1)],1)},staticRenderFns:[]};var u={components:{"report-table":r("VU/8")(o,n,!1,function(e){r("G096")},"data-v-557a50ce",null).exports},methods:{},created:function(){"true"!=this.$store.getters.getUserLoginStatus&&this.$router.push("/login")}},l={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("report-table",{staticClass:"table",attrs:{id:-1,height:700,pageSize:10}})],1)},staticRenderFns:[]};var i=r("VU/8")(u,l,!1,function(e){r("JWo3")},"data-v-a0d690a6",null);t.default=i.exports}});
//# sourceMappingURL=7.22e081f997d2138c5b01.js.map