webpackJsonp([8],{LFvD:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i("bOdI"),r=i.n(a),n=i("mtWM"),s=i.n(n),o={components:{"search-filter":i("KI//").a},props:{id:Number,pageSize:Number,height:Number},data:function(){return{matching_entries:[],parameter_dialogFormVisible:!1,edit_parameter:{},options:[{value:"search",label:"全部搜索"},{value:"submit_user__username",label:"筛选：举报者"},{value:"user__username",label:"筛选：被举报者"},{value:"type",label:"筛选：举报类型"},{value:"verdict_type",label:"筛选：状态"}],select:"search",input:"",data:{count:0},Status:{GUI:"有罪",INN:"无罪",UNT:"未处理"},Types:{SCM:"诈骗行为",HRS:"恶意骚扰",ADV:"推销广告",PRN:"低俗色情",ILL:"违法信息",SPM:"垃圾内容",CPY:"侵权行为",OTH:"其他"},reports_notice:[],page_sum:0}},created:function(){var e=this;s.a.get("/matching-entries/",{params:{offset:0,limit:10},headers:{Authorization:"Bearer "+this.$store.getters.getUserAccessToken}}).then(function(t){e.matching_entries=t.data.results,e.page_sum=t.data.count;for(var i=0;i<e.matching_entries.length;i++)0==e.matching_entries[i].notified?e.matching_entries[i].notified="未通知":1==e.matching_entries[i].notified&&(e.matching_entries[i].notified="已通知"),e.matching_entries[i].matching_degree=e.matching_entries[i].matching_degree.toFixed(4)}).catch(function(e){alert("error:"+e)}),"true"==this.$store.getters.getUserIsAdmin&&s.a.get("/matching-hyperparameters/get-hyper/",{headers:{Authorization:"Bearer "+this.$store.getters.getUserAccessToken}}).then(function(t){e.edit_parameter=t.data}).catch(function(e){alert("error:"+e)})},methods:{editMatchingParameters:function(){var e=this;s.a.post("/matching-hyperparameters/update-hyper/",this.edit_parameter,{headers:{Authorization:"Bearer "+this.$store.getters.getUserAccessToken}}).then(function(t){e.$message({type:"success",message:"发送成功!"}),location.reload()}).catch(function(e){alert("error:"+e)})},filterType:function(e,t){return t.type===e},handleMessage:function(e,t){var i=this;s.a.post("/matching-entries/"+t.id+"/matching-notify/",{headers:{Authorization:"Bearer "+this.$store.getters.getUserAccessToken}}).then(function(e){i.$message({type:"success",message:"发送成功!"}),location.reload()}).catch(function(e){alert("error:"+e)})},sortChange:function(e,t,i){var a=this,r=void 0;r="descending"==e.order?"-"+e.prop:e.prop,s.a.get("/matching-entries/",{params:{ordering:r,offset:0,limit:10},headers:{Authorization:"Bearer "+this.$store.getters.getUserAccessToken}}).then(function(e){a.matching_entries=e.data.results;for(var t=0;t<a.matching_entries.length;t++)"false"==a.matching_entries[t].notified?a.matching_entries[t].notified="未通知":"true"==a.matching_entries[t].notified&&(a.matching_entries[t].notified="已通知")}).catch(function(e){a.$alert(e.response.data)})},searchAndFilter:function(e,t){this.select=e,this.input=t,this.changePage(1)},changePage:function(e){var t,i=this;s.a.get("/matching-entries/",{params:(t={},r()(t,this.select,this.input),r()(t,"offset",10*(e-1)),r()(t,"limit",10),t),headers:{Authorization:"Bearer "+this.$store.getters.getUserAccessToken}}).then(function(e){i.matching_entries=e.data.results,i.page_sum=e.data.count;for(var t=0;t<i.matching_entries.length;t++)0==i.matching_entries[t].notified?i.matching_entries[t].notified="未通知":1==i.matching_entries[t].notified&&(i.matching_entries[t].notified="已通知")}).catch(function(e){i.$alert(e.response.data)})}}},l={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("el-card",{staticClass:"title-card"},[e._v("\n    所有匹配信息\n    "),i("div",{staticClass:"edit"},[i("el-button",{staticClass:"change",attrs:{id:e.id,target:"rent-application",type:"primary",disabled:!("true"==this.$store.getters.getUserIsAdmin)},on:{click:function(t){e.parameter_dialogFormVisible=!0}}},[e._v("修改匹配参数")])],1)]),e._v(" "),i("el-dialog",{staticClass:"edit_parameter",attrs:{title:"修改匹配参数",visible:e.parameter_dialogFormVisible,width:"40%"},on:{"update:visible":function(t){e.parameter_dialogFormVisible=t}}},[i("el-row",[i("el-col",{attrs:{span:12}},[i("el-form",{attrs:{"label-width":"180px"}},[i("el-form-item",{attrs:{label:"启事匹配阈值"}},[i("el-input-number",{attrs:{precision:1,step:.1,"controls-position":"right",min:0,max:1,size:"mini",width:"60%"},model:{value:e.edit_parameter.matching_threshold,callback:function(t){e.$set(e.edit_parameter,"matching_threshold",t)},expression:"edit_parameter.matching_threshold"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"启事“地点”权重"}},[i("el-input-number",{attrs:{precision:1,step:.1,"controls-position":"right",min:0,max:10,size:"mini",width:"60%"},model:{value:e.edit_parameter.notice_location_weight,callback:function(t){e.$set(e.edit_parameter,"notice_location_weight",t)},expression:"edit_parameter.notice_location_weight"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"启事“时间”权重"}},[i("el-input-number",{attrs:{precision:1,step:.1,"controls-position":"right",min:0,max:10,size:"mini",width:"60%"},model:{value:e.edit_parameter.notice_time_weight,callback:function(t){e.$set(e.edit_parameter,"notice_time_weight",t)},expression:"edit_parameter.notice_time_weight"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"启事“描述”权重"}},[i("el-input-number",{attrs:{precision:1,step:.1,"controls-position":"right",min:0,max:10,size:"mini",width:"60%"},model:{value:e.edit_parameter.notice_desc_weight,callback:function(t){e.$set(e.edit_parameter,"notice_desc_weight",t)},expression:"edit_parameter.notice_desc_weight"}})],1)],1)],1),e._v(" "),i("el-col",{attrs:{span:12}},[i("el-form",{attrs:{"label-width":"120px"}},[i("el-form-item",{attrs:{label:"启事“其他”权重"}},[i("el-input-number",{attrs:{precision:1,step:.1,"controls-position":"right",min:0,max:10,size:"mini",width:"60%"},model:{value:e.edit_parameter.notice_extra_weight,callback:function(t){e.$set(e.edit_parameter,"notice_extra_weight",t)},expression:"edit_parameter.notice_extra_weight"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"物品“属性”权重"}},[i("el-input-number",{attrs:{precision:1,step:.1,"controls-position":"right",min:0,max:10,size:"mini",width:"60%"},model:{value:e.edit_parameter.prop_tag_weight,callback:function(t){e.$set(e.edit_parameter,"prop_tag_weight",t)},expression:"edit_parameter.prop_tag_weight"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"物品“描述”权重"}},[i("el-input-number",{attrs:{precision:1,step:.1,"controls-position":"right",min:0,max:10,size:"mini",width:"60%"},model:{value:e.edit_parameter.prop_desc_weight,callback:function(t){e.$set(e.edit_parameter,"prop_desc_weight",t)},expression:"edit_parameter.prop_desc_weight"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"物品“其他”权重"}},[i("el-input-number",{attrs:{precision:1,step:.1,"controls-position":"right",min:0,max:10,size:"mini",width:"60%"},model:{value:e.edit_parameter.prop_extra_weight,callback:function(t){e.$set(e.edit_parameter,"prop_extra_weight",t)},expression:"edit_parameter.prop_extra_weight"}})],1)],1)],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("div",{staticClass:"foot"},[i("el-button",{on:{click:function(t){e.parameter_dialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:e.editMatchingParameters}},[e._v("确 定")])],1)])],1),e._v(" "),i("el-card",{staticClass:"table-card"},[i("el-table",{staticClass:"table",attrs:{data:e.matching_entries,stripe:"",id:"users-table"},on:{"sort-change":e.sortChange}},[i("el-table-column",{attrs:{prop:"id",label:"ID",width:"120",sortable:"custom"}}),e._v(" "),i("el-table-column",{attrs:{prop:"lost_property_name",label:"失物名称",width:"150",sortable:"custom","show-overflow-tooltip":!0}}),e._v(" "),i("el-table-column",{attrs:{prop:"lost_notice_description",label:"失物描述",width:"250",sortable:"custom","show-overflow-tooltip":!0}}),e._v(" "),i("el-table-column",{attrs:{prop:"found_property_name",label:"拾物名称",width:"150",sortable:"custom","show-overflow-tooltip":!0}}),e._v(" "),i("el-table-column",{attrs:{prop:"found_notice_description",label:"拾物描述",width:"250",sortable:"custom","show-overflow-tooltip":!0}}),e._v(" "),i("el-table-column",{attrs:{prop:"matching_degree",label:"匹配相似度",width:"150"}}),e._v(" "),i("el-table-column",{attrs:{prop:"notified",label:"状态",filters:[{text:"已通知",value:"已通知"},{text:"未通知",value:"未通知"}],"filter-method":e.filterType,width:"130"}}),e._v(" "),i("el-table-column",{attrs:{label:"操作",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-button",{attrs:{size:"mini",type:"danger"},nativeOn:{click:function(i){return i.stopPropagation(),e.handleMessage(t.$index,t.row)}}},[e._v("通知")])]}}])})],1),e._v(" "),i("el-pagination",{staticClass:"page-chooser",attrs:{background:"",layout:"prev, pager, next",total:e.page_sum},on:{"current-change":e.changePage}})],1)],1)},staticRenderFns:[]};var c={components:{"matching-entries-table":i("VU/8")(o,l,!1,function(e){i("ZvzN")},"data-v-6be88c74",null).exports},methods:{},created:function(){"true"!=this.$store.getters.getUserLoginStatus&&this.$router.push("/login")}},m={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("matching-entries-table",{staticClass:"table",attrs:{id:-1,height:700,pageSize:10}})],1)},staticRenderFns:[]};var p=i("VU/8")(c,m,!1,function(e){i("fBrZ")},"data-v-6e7eb41a",null);t.default=p.exports},ZvzN:function(e,t){},fBrZ:function(e,t){}});
//# sourceMappingURL=8.a5b929932cde16136b4b.js.map